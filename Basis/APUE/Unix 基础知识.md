## Unix 基础知识

### 口令文件

* `/etc/passwd`

* 冒号分隔的字段的组成依次是：**登录名，加密口令，数字用户ID，数字组ID，注释字段，起始目录，shell 程序**

  `root:x:0:0:root:/root:/bin/bash`

### 输入输出

* **文件描述符：**（file descriptor) 是一个小的非负整数，内核用以标识一个特定进程正在访问的文件。当内核打开一个现有文件或创建一个新文件时，它都返回一个文件描述符。在读，写文件时，可以使用这个文件描述符
* **标准输入，输出和错误：**每当运行一个新程序时，所有的 `shell` 都为其打开 3 个文件描述符，即，标准输入，标准输出，标准错误。如果不做特殊处理，则 3 个描述符都链接向终端。大多数 `shell` 都提供一种方法，使其中任何一个或所有这 3 个描述符都能重新定向到某个文件
* **不带缓冲的 I/O:** 函数 `open`, `read`, `write`, `lseek` ,`close` 提供了不带缓冲的 I/O.这些函数都使用文件描述符
* **标准I/O:** 标准 I/O 函数为那些不带缓冲的 I/O 函数提供了一个带缓冲的接口。使用标准 I/O 函数无需担心如何选取最佳的缓冲区大小。

### 程序与进程

* **程序：**是一个存储在磁盘上的某个目录的可执行文件，内核使用 `exec` 函数，将程序读入内存，并执行程序
* **进程和进程ID：**程序的执行实例。`unix` 确保每个进程都有一个唯一的数字标识符，为进程ID，进程ID是一个非负整数

* **进程控制函数：**有 3 个用于进程控制的主要函数：`fork`, `exec` `waitpid` (`exec` 函数有 7 种变体)
* **线程和线程ID：**一个进程内的所有线程共享同一地址空间，文件描述符，栈及与进程相关的属性。因为他们能访问同一存储区，所以各线程在访问共享数据时需要采取同步措施以避免不一致性。与进程相同，线程也用ID 标识。但是线程 ID 只在它所属的进程内起作用。

### 用户标识

* **用户ID：**是一个整数，它向系统标识各个不同的用户。
* **组ID：**是一个整数。组用于将若干用户集合到项目或部门中去。组文件 `/etc/group`
* **附属组ID：**除了在口令文件中对一个登录名指定一个组 ID 外，大多数 UNIX 系统版本还允许一个用户属于另外一些组。

### 信号

信号用于通知进程发生了某种情况。进程有以下 3 种处理信号的方式

* **忽略信号：** 有些信号表示硬件异常
* **按系统默认方式处理：**

* **提供一个函数：**信号发生时调用该函数，捕捉该信号。通过提供自编的函数。能指定什么时候产生了信号，并按期望的方式处理它

### 时间值

UNIX 系统使用两种不同的时间值

* 日历时间。该值是协调时间经过的秒数累计，系统基本数据类型 `time_t` 用于保存这种时间值

* 进程时间（CPU时间），用以度量进程使用的中央处理器资源。进程时间以时钟滴答计算。每秒中曾经取为 50，60，100个时钟滴答，系统基本数据类型 `clock_t` 保存这种时间值。使用 `sysconf` 函数得到每秒的时钟滴答数

* 进程执行时间：`unix` 系统为一个进程维护 3 个进程时间值，使用 time 获取

  1.时钟时间：进程运行的时间总理

  2.用户 CPU 时间：执行用户指令所用的时间量

  3.系统 CPU 时间：该进程执行内核程序所经历的时间