### 单例模式

#### 单例模式定义

*Ensure a class has only instance, and provide a global point of access to it, 确保某个类只有一个实例，并且提供一个全局服务访问它*

*单例模式通用代码*

```java
public class Singleton {
    public static final Singleton singleton = new Singleton();
    private Singleton(){}
}
```

### 单例模式的应用

#### 优点

* 单例模式在内存中只有一个实例，减少了内存开支，特别是一个对象需要频繁创建、销毁时，而且创建或销毁性能又无法优化，单例模式的优势明显

* 由于单例模式只生成一个实例，所以减少了内存开销，当一个对象的产生需要比较多的资源时，如读取配置，产生其他依赖对象时，则可以通过在应用启动时直接产生一个单例对象，然后用永久驻留内存的方式来解决（在 J2EE 中采用单例模式时需要注意 JVM 垃圾回收机制）

* 单例模式可以避免对资源的多重占用

* 单例模式可以在系统设置全局的访问点

#### 缺点

* 单例模式一般没有接口，扩展很困难

* 单例模式对测试不利，在并行开发环境下，如果单例模式没有完成，是不能进行测试，没有接口也不能使用 mock 的方式虚拟一个对象

* 单例模式与单一职责原则有冲突。一个类应该只实现一个逻辑，而不关心它是否是单例，是不是要单例取决于环境，单例模式把『要单例』和业务逻辑融合在一个类中

#### 场景

* 要求生成唯一序列号的环境

* 在整个项目中需要一个共享访问点或共享数据。

* 创建一个对象需要消耗的资源过多