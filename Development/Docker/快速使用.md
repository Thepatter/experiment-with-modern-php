## 快速使用 docker

### 安装配置及卸载

#### 基于 ubuntu 安装

```shell
# 删除旧版本
sudo apt remove docker docker-engine docker.io
# 安装依赖
sudo apt install apt-transport-https ca-certificates curl gnupg2 software-properties-common
# 信任 GPG 公钥
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
# 使用 mirror
sudo add-apt-repository \
	"deb [arch=amd64] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu \
	stable"
# 安装 docker-ce
sudo apt update
sudo apt install docker-ce
# 添加用户到 docker 组
sudo usermod -aG docker your-user
# 配置 daemon
sudo systemctl enable docker
# 卸载
sudo apt purge docker-ce
```

#### 配置

##### 允许接受来自远程主机登录

默认情况下，Docker 守护程序监听 unix 套接字上的连接以接受来自本地客户端的请求。通过将 `docker` 配置为监听 IP 地址以及 Unix 套接字，可以允许 `Docker` 接受来自远程主机的请求。可以使用 `docker.service` 或 `daemon.json`，但是不能两个一起使用

* `docker.service`

  ```shell
  # 编辑
  sudo systemctl edit docker.service
  # 添加或修改
  [Service]
  ExecStart=
  ExecStart=/usr/bin/dockerd -H fd:// -H tcp://127.0.0.1:2375
  # 重载
  systemctl daemon-reload
  # 重启
  sudo systemctl restart docker.service
  ```

* `daemon.json`

  ```shell
  # /etc/docker/daemon.json
  {
      "hosts": ["unix:///var/run/docker.sock", "tcp://127.0.0.1:2375"]
  }
  # 重启
  sudo systemctl restart docker.service
  ```

### 镜像

