### Go 基础语法

#### 基础

##### 变量和声明

默认情况下，Go 会为变量分配默认值：`Integers` 默认为 `0`，`booleans` 默认为 `false`，`strings` 默认值是 `""`。

```go
# 声明与赋值
var power int = 9000
# 变量类型推断
power := 9000
# 多个变量同时赋值
name, power := "GoKu", 9000
```

在相同作用域下，相同的变量不能被声明两次，Go 不允许在程序拥有未使用的变量，像 import 不能导入未使用的包一样。

初始化一个变量，`var NAME TYPE`，声明及赋值 `NAME := VALUE`，给之前已声明变量赋值 `NAME = VALUE`

##### 运行 go 代码

* 运行

  ```shell
  go run main.go
  ```

* 编译

  ```shell
  go build main.go
  ```

在开发中，你既可以使用 `go run` 也可以使用 `go build`，但正式部署代码时，应该通过 `go build` 生成二进制文件并执行它。

在 go 中程序入口必须是 `main` 函数，并且在 `main` 包内。

##### 导入

go 有很多内建函数，可以在没有引用的情况下直接使用。`import` 关键字被用于声明文件中代码要使用的包

```go
import (
  "fmt",
  "os"
)
# 或者
import "fmt"
import "os"
```

##### 函数声明

```go
# 没有返回值
func log(message string) {}
# 一个返回值
func add(a int, b int) int {}
# 两个返回值
func power(name string) (int, bool) {}
```

调用函数

```go
value, exists := power("goku")
if exists == false {
    
}
将其他返回值赋给空白符_
_, exists := power("goku")
if exists == false {
    
}
```

#### 结构体

##### 声明和初始化

不是面向对象语言，没有对象和继承，没有多态和重载。go 具有结构体，可以将一些方法和结构体关联。字段可以是任何类型，包含其他结构体，array，maps，interfaces，functions 等。

*定义结构体*

```go
type Saiyan struct {
    Name string
    Power int
}
```

*声明和初始化*

```go
goku := Saiyan {
	Name: "Goku",
	Power: 900
}
goku1 := Saiyan{}
goku1.Power = 9000
gok2 := Saiyan {"Goke", 9000}
```

可以使用 `&` 来获取指针，并使用指针修改原始内存地址值，使用 `*`  来声明指针参数。结构体没有构造器，可以创建一个返回所期望类型的实例函数（类似于工厂）

```go
# 返回结构体指针
func NewSaiyan(name string, power int) *Saiyan {
	return &Saiyan {
		Name: name,
		Power: power,
	}
}
# 返回结构体
func NewSaiyan(name string, power int) Saiyan {
	return Saiyan {
		Name: name,
		Power: power,
	}
}
```

内置 `new` 函数，使用它来分配类型所需要的内存。`new(x)` 与 `&x{}` 相同。

```go
goku := new(Saiyan)
# 等价
goku := &Saiyan{}
```

##### 结构体上函数

*方法关联在结构体上*

```go
type Saiyan struct {
    Name string
    Power int
}
func (s *Saiyan) Super() {
    s.Power += 10000
}
```

`*Saiyan` 类型是 `Super` 方法的接受者，调用 Super 方法

```go
goku := &Saiyan{"Goku", 9001}
goku.Super()
fmt.Println(goku.Power)
```

##### 组合

```go
type Person struct {
	Name string
}
func (p *Person) Introduce() {
	fmt.Printf("Hi, I'm %s\n", p,Name)
}
type Saiyan struct {
	*Person
	Power int
}
# 使用组合
goku := &Saiyun {
    Person: &Person{"Goku"},
    Power: 9001,
}
goku.Introduct()
```





