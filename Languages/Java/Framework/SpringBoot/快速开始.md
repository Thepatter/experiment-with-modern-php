### Spring Boot 快速开始

#### 安装配置

##### 生成骨架

* 在 start.spring.io 上定制 spring boot 组件然后下载到 idea 中打开，会自行安装依赖
* 直接在 idea 中使用 Spring Initializr 配置

##### 自动配置

Spring Boot 提供了配置属性的方法，配置属性是 Spring 应用上下文中 bean 的属性，可以通过多个源进行设置，包括 JVM 系统属性，命令行参数以及环境变量

##### 配置文件

###### 读取配置

支持 yml 格式和 properties 格式配置，在配置文件配置中文值，读取时会出现中文乱码，建议配置时采用 Unicode 字符，支持使用 ${random.value} 等生成随机值

可以 bean 在属性使用 @Value("${author}") 读取配置

可以在实体类上加上注解 @ConfigurationProperties(prefix = "")，同时需要在启动类上加入注解 @EnableConfigurationProperties(MysqlConfig.class)，启动这个配置类。

###### 多环境配置

可以支持多环境，在 application.properties 中指定当前配置

```properties
# application-local.properties
spring.profiles.active = local
```

##### 日志

默认使用 Logback 日志组件

###### 配置

|               配置                |          含义          |
| :-------------------------------: | :--------------------: |
| logging.exception-conversion-word | 记录异常时使用的转换字 |
|           logging.file            |      设置日志文件      |
|       logging.file.max-size       |    最大日志文件大小    |
|          logging.config           |        日志配置        |
|     logging.file.max-history      |    最大归档文件数量    |
|           logging.path            |      日志文件目录      |
|      logging.pattern.console      | 在控制台输出的日志模式 |
|    logging.pattern.dateformat     |  日志格式内的日期格式  |
|       logging.pattern.file        |    默认使用日志模式    |
|       logging.pattern.level       |        日志级别        |
|                PID                |       当前进程ID       |

###### 输出到文件

默认 Spring boot 会将日志消息打印到控制台，要将日志输出到文件中，需要在 application.properties 文件中指定 logging.file 或 logging.path 选项

* logging.file

  设置日志文件，可以设置绝对或相对路径

* logging.path

  设置日志目录，在设置目录后，会在目录下创建一个 spring.log

同时设置则 logging.file 生效。Spring Boot应用日志文件输出与控制台输入内容一致，在日志文件达到 10MB 的时候会自动分隔日志文件，默认情况下会记录 ERROR-level、WARN-level 和 INFO-level 消息。日志文件可以通过设置logging.file.max-size 属性更改大小限制

###### 记录级别

支持设置包级日志记录级别（TRACE，DEBUG，INFO，ERROR，FATAL，OFF）

* logging.level.root = WARN

  root 日志以 WARN 级别输出

* logging.level.com.wap.api = DEBUG

  com.wap.api 包下的类以 DEBUG 级别输出，支持用 ，分割来设置一组日志级别

###### 输出格式

Spring Boot 默认支持通过 XML 配置自定义日志格式及输出，并且在 ApplicationContext 创建前就已经进行了初始化。在Spring Boot 默认使用的 Logback 中，可以通过在 src/mian/resources 文件夹下定义 logback.xml 或 logback-spring.xml 作为日志配置。 

 Spring Boot 官方推荐优先使用带有 -spring 的文件名作为你的日志配置（如使用 logback-spring.xml，而不是logback.xml），命名为 logback-spring.xml 日志配置，就可以在日志输出的时候引入一些 Spring Boot 特有的配置项。



