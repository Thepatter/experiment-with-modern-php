### Java I/O 

è‡ª 1.0 ä»¥æ¥ï¼ŒJava I/O ç±»åº“å‘ç”Ÿäº†æ˜æ˜¾æ”¹å˜ï¼Œåœ¨åŸæ¥é¢å‘å­—èŠ‚çš„ç±»ä¸­æ·»åŠ äº†é¢å‘å­—ç¬¦å’ŒåŸºäº Unicode çš„ç±»ï¼Œ1.4 ä¸­ï¼Œæ·»åŠ äº† nio ç±»åº“ç”¨äºæ”¹è¿›æ€§èƒ½åŠåŠŸèƒ½ã€‚

#### IO ç±»åº“

*java.io* åŒ…ä¸­åŒ…å«äº†å¾ˆå¤šç±»ç”¨äºè¿›è¡Œ I/O æ“ä½œ

##### æ–‡ä»¶

###### File

æ—¢èƒ½ä»£è¡¨ä¸€ä¸ªç‰¹å®šæ–‡ä»¶çš„åç§°ï¼Œåˆèƒ½ä»£è¡¨ä¸€ä¸ªç›®å½•ä¸‹çš„ä¸€ç»„æ–‡ä»¶çš„åç§°

å¯ä»¥ç”¨ *File* å¯¹è±¡åˆ›å»ºæ–°çš„ç›®å½•æˆ–å°šä¸å­˜åœ¨çš„ç›®å½•è·¯å¾„å’ŒæŸ¥çœ‹æ–‡ä»¶ç‰¹æ€§ï¼ˆå¤§å°ã€æœ€åä¿®æ”¹æ—¥æœŸï¼Œè¯»å†™ï¼Œåˆ é™¤æ–‡ä»¶ï¼‰ã€‚å¦‚æœä»¥ *FileOutputStream* æˆ– *FileWriter* æ‰“å¼€ï¼Œé‚£ä¹ˆå®ƒè‚¯å®šä¼šè¢«è¦†ç›–ï¼Œåº”è¯¥å…ˆä½¿ç”¨ *File* åˆ¤æ–­

###### æ–‡ä»¶é”

Java çš„æ–‡ä»¶åŠ é”ç›´æ¥æ˜ å°„äº†æœ¬åœ°æ“ä½œç³»ç»Ÿçš„åŠ é”å·¥å…·ï¼š

*   é€šè¿‡å¯¹ *FileChannel*  è°ƒç”¨ tryLockï¼ˆéé˜»å¡ï¼Œæ— æ³•è·å–é”æ—¶ç›´æ¥è¿”å›ï¼‰æˆ–  lockï¼ˆé˜»å¡è‡³è·å¾—é”è¿”å›ï¼Œæˆ–è°ƒç”¨çº¿ç¨‹ä¸­æ–­ï¼Œè°ƒç”¨é€šé“å…³é—­ï¼‰ï¼Œå°±å¯ä»¥è·å¾—æ•´ä¸ªæ–‡ä»¶çš„ *FileLock*ï¼ˆ*SocketChannel*ã€*DatagramChannel*ã€*ServerSocketChannel* ä¸éœ€è¦åŠ é”ï¼Œå®ƒä»¬æ˜¯ä»å•è¿›ç¨‹å®ä½“ç»§æ‰¿è€Œæ¥ï¼‰
*   æ”¯æŒå¯¹æ–‡ä»¶éƒ¨åˆ†è¿›è¡Œä¸Šé”ã€‚å…·æœ‰å›ºå®šå°ºå¯¸çš„é”ä¸éšæ–‡ä»¶å°ºå¯¸çš„å˜åŒ–è€Œå˜åŒ–ã€‚

å¯¹ç‹¬å é”æˆ–å…±äº«é”çš„æ”¯æŒå¿…é¡»ç”±åº•å±‚çš„æ“ä½œç³»ç»Ÿæä¾›ã€‚å¦‚æœæ“ä½œç³»ç»Ÿä¸æ”¯æŒå…±äº«é”ï¼Œä¼šä½¿ç”¨ç‹¬å é”ï¼Œå¯é€šè¿‡ isShared æŸ¥è¯¢é”ç±»å‹

##### å­—èŠ‚è¾“å…¥è¾“å‡º

é€šè¿‡ç»§æ‰¿ï¼Œä»»ä½•è‡ª *Inputstream*ï¼ˆå­—èŠ‚ï¼‰æˆ– *Reader*ï¼ˆå­—ç¬¦ï¼‰æ´¾ç”Ÿç±»éƒ½å¯ä»¥ä½¿ç”¨ read æ–¹æ³•è¯»å–å•ä¸ªå­—èŠ‚æˆ–å­—èŠ‚æ•°ç»„ï¼›ä»»ä½•è‡ª *OutputStream* æˆ– *Writer* æ´¾ç”Ÿç±»éƒ½å¯ä»¥ä½¿ç”¨ writer æ–¹æ³•å†™å•ä¸ªå­—èŠ‚æˆ–å­—èŠ‚æ•°ç»„ã€‚å¾ˆå°‘ä½¿ç”¨å•ä¸€çš„ç±»æ¥åˆ›å»ºæµå¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡å åˆå¤šä¸ªå¯¹è±¡æ¥æä¾›æ‰€æœŸæœ›çš„åŠŸèƒ½ï¼Œå³åˆ›å»ºå•ä¸€çš„ç»“æœæµï¼Œéœ€è¦åˆ›å»ºå¤šä¸ªå¯¹è±¡

åœ¨ Java 1.0 ä¸­ï¼Œç±»åº“çš„è®¾è®¡è€…é¦–å…ˆé™å®šä¸è¾“å…¥æœ‰å…³çš„æ‰€æœ‰ç±»éƒ½åº”è¯¥ä» *InputStream* ç»§æ‰¿ï¼Œè€Œä¸è¾“å‡ºæœ‰å…³çš„æ‰€æœ‰ç±»éƒ½åº”è¯¥ä» *OutputStream* ç»§æ‰¿

å­—èŠ‚çš„è¾“å…¥/è¾“å‡ºè¢«æŠ½è±¡ä¸ºæµï¼š*InputStream*/*OutputStream* å­ç±»æŒ‡å®šå°†é‚£ç§æ•°æ®æºï¼ˆæ–‡ä»¶ã€å­—èŠ‚æ•°ç»„ã€å­—ç¬¦ä¸²ç­‰ï¼‰æŠ½è±¡ä¸ºæµï¼Œ*FilterInputStream*/*FilterOutputStream* çš„å­ç±»è£…é¥°æµï¼ŒæŒ‡å®šå¦‚ä½•è¯»å–/å†™å…¥æµä¸­çš„æ•°æ®ï¼ˆç¼“å†²ã€è¡Œã€åŸºæœ¬ç±»å‹ï¼‰

*   ä½¿ç”¨ *DataOutputStream* å†™å­—ç¬¦ä¸²ä¸”è®© *DataInputStream*  èƒ½è¯»å–çš„å¯é åšæ³•æ˜¯ä½¿ç”¨ UTF-8 ç¼–ç 

###### *InputStream*

*InputStream* ä½œç”¨æ˜¯ç”¨æ¥è¡¨ç¤ºé‚£äº›ä»ä¸åŒæ•°æ®æºäº§ç”Ÿè¾“å…¥çš„ç±»ã€‚æ¯ç§æ•°æ®æºéƒ½æœ‰ç›¸åº”çš„ *InputStream* å­ç±»ã€‚å’Œ *FilterInputStream* ä¸ºè£…é¥°å™¨ç±»ï¼ˆæŠŠå±æ€§æˆ–æœ‰ç”¨çš„æ¥å£ä¸è¾“å…¥æµè¿æ¥åœ¨ä¸€èµ·ï¼‰æä¾›åŸºç±»

*è¾“å…¥æºåŠè£…é¥°å™¨åŸºç±»*

|           å­ç±»            |                             åŠŸèƒ½                             |                            æ„é€ å™¨                            |                        ä½¿ç”¨                         |
| :-----------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :-------------------------------------------------: |
|  *ByteArrayInputStream*   |                 å°†å†…å­˜ç¼“å†²åŒºå½“ä½œ InputStream                 |                    ç¼“å†²åŒºï¼Œå­—èŠ‚å°†ä»ä¸­å–å‡º                    |  ä½œä¸ºä¸€ç§æ•°æ®æºï¼›ä¸ FilterInputStream å¯¹è±¡ç»„åˆä½¿ç”¨  |
| *StringBufferInputStream* | å°† String è½¬æ¢æˆ InputStreamã€‚å·²åºŸå¼ƒï¼ˆå¯èƒ½æ— æ³•æ­£ç¡®è½¬æ¢ä¸ºå­—èŠ‚ï¼‰ä½¿ç”¨ *StringReader* |                å­—ç¬¦ä¸²ï¼Œåº•å±‚ä½¿ç”¨ StringBuffer                 |      æ•°æ®æºï¼›ä¸ FilterInputStream å¯¹è±¡ç»„åˆä½¿ç”¨      |
|     *FileInputStream*     |                          ç”¨äºæ–‡ä»¶è¯»                          |              æ–‡ä»¶åå­—ç¬¦ä¸²ï¼ŒFileã€FileDescriptor              |      æ•°æ®æºï¼›ä¸ FilterInputStream å¯¹è±¡ç»„åˆä½¿ç”¨      |
|    *PipedInputStream*     |      äº§ç”Ÿç”¨äºå†™å…¥ PipedOutputStream çš„æ•°æ®ï¼Œå®ç°ç®¡é“åŒ–       |                      PipedOutputStream                       | ä½œä¸ºå¤šçº¿ç¨‹æ•°æ®æºï¼›ä¸ FilterInputStream å¯¹è±¡ç»„åˆä½¿ç”¨ |
|   *SequenceInputStream*   |     å°†ä¸¤ä¸ªæˆ–å¤šä¸ª InputStream å¯¹è±¡è½¬æ¢æˆå•ä¸€ InputStream      | ä¸¤ä¸ª InputStream å¯¹è±¡æˆ–ä¸€ä¸ªå®¹çº³ InputStream å¯¹è±¡çš„å®¹å™¨ Enumeration |    ä½œä¸ºæ•°æ®æºï¼›ä¸ FilterInputStream å¯¹è±¡ç»„åˆä½¿ç”¨    |
|   *FileterInputStream*    |    æŠ½è±¡ç±»ï¼Œä½œä¸ºè£…é¥°å™¨æ¥å£ï¼Œä¸å…¶ä»– InputStream ç±»ç»„åˆä½¿ç”¨     |                                                              |        æŠŠå±æ€§æˆ–æœ‰ç”¨çš„æ¥å£ä¸è¾“å…¥æµè¿æ¥åœ¨ä¸€èµ·         |

###### *OutputStream*

è¯¥ç±»å†³å®šäº†è¾“å‡ºçš„ç›®çš„åœ°

|         å­ç±»          |                             åŠŸèƒ½                             |                 æ„é€ å™¨                  |                         ä½¿ç”¨                         |
| :-------------------: | :----------------------------------------------------------: | :-------------------------------------: | :--------------------------------------------------: |
| ByteArrayOutputStream |    åœ¨å†…å­˜ä¸­åˆ›å»ºç¼“å†²åŒºï¼Œæ‰€æœ‰é€å¾€æµçš„æ•°æ®éƒ½è¦æ”¾ç½®åœ¨æ­¤ç¼“å†²åŒº    |            åˆå§‹å¤§å°ï¼ˆå¯é€‰ï¼‰             |    æŒ‡å®šæ•°æ®ç›®çš„åœ°ï¼›ä¸ FilterOutputStream ç»„åˆä½¿ç”¨    |
|   FileOutputStream    |                           å†™å…¥æ–‡ä»¶                           | æ–‡ä»¶åå­—ç¬¦ä¸²ï¼ŒFile å¯¹è±¡ï¼ŒFileDescriptor |   æŒ‡å®šæ•°æ®çš„ç›®çš„åœ°ï¼›ä¸ FilterOutputStream ç»„åˆä½¿ç”¨   |
|   PipedOutputStream   | ä»»ä½•å†™å…¥å…¶ä¸­çš„ä¿¡æ¯éƒ½ä¼šè‡ªåŠ¨ä½œä¸ºç›¸å…³ PipeInputStream è¾“å‡ºï¼Œå®ç°ç®¡é“åŒ– |            PipedInputStream             | æŒ‡å®šå¤šçº¿ç¨‹æ•°æ®ç›®çš„åœ°ï¼›ä¸ FilterOutputStream ç»„åˆä½¿ç”¨ |
|  FilterOutputStream   |     æŠ½è±¡ç±»ï¼Œä½œä¸ºè£…é¥°å™¨æ¥å£ï¼Œä¸å…¶ä»– OutputStream ç»„åˆä½¿ç”¨     |                                         |                                                      |

###### *RandomAccessFile*

éšæœºè¯»å†™ï¼Œä¸åœ¨ *InputStream*ã€*OutputStream* ç»§æ‰¿å±‚æ¬¡ç»“æ„ï¼Œä¸æ”¯æŒè£…é¥°ã€‚å®ç°äº† *DataInput*ã€*DataOutput* æ¥å£ã€‚å·¥ä½œæ–¹å¼ç±»ä¼¼äºæŠŠ *DataInputStream* å’Œ *DataOutputStream* ç»„åˆä½¿ç”¨ï¼Œå¹¶æ·»åŠ äº†ä¸€äº›æ–¹æ³•ã€‚æ”¯æŒæŸ¥æ‰¾å½“å‰æ‰€å¤„çš„æ–‡ä»¶ä½ç½®ï¼ˆgetFilePointerï¼‰åŠå°†æ–‡ä»¶ç§»åŠ¨åˆ°æ–°ä½ç½®ï¼ˆseekï¼‰ï¼Œæ”¯æŒéšæœºè¯»å’Œè¯»å†™æ¨¡å¼ï¼Œä½†ä¸æ”¯æŒåªå†™æ¨¡å¼ï¼Œæ‹¥æœ‰è¯»å–åŸºæœ¬ç±»å‹å’Œ UTF-8 å­—ç¬¦ä¸²çš„æ–¹æ³•

1.4 ä¹‹åï¼Œå¤§å¤šæ•°åŠŸèƒ½ç”± nio å­˜å‚¨æ˜ å°„æ–‡ä»¶å–ä»£ã€‚

###### ç®¡é“æµ

ç®¡é“æµä¸€èˆ¬ç”¨äºå¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„ä»»åŠ¡ä¹‹é—´çš„é€šä¿¡

###### è¿‡æ»¤å™¨

æŠ½è±¡ Filter æ˜¯æ‰€æœ‰è£…é¥°å™¨ç±»çš„åŸºç±»ã€‚*FilterInputStream* å’Œ *FilterOutputStream* æ˜¯ç”¨æ¥æä¾›è£…é¥°å™¨ç±»æ¥å£ä»¥æ§åˆ¶ç‰¹å®š *InputStream* å’Œ *OutputStream* çš„ä¸¤ä¸ªç±»ã€‚

*   *FilterInputStream* å­ç±»åŠåŠŸèƒ½

    |          å­ç±»           |                         åŠŸèƒ½                         |            æ„é€ å‚æ•°            |                         ä½¿ç”¨                          |
    | :---------------------: | :--------------------------------------------------: | :----------------------------: | :---------------------------------------------------: |
    |    *DataInputStream*    |   ä»æµä¸­è¯»å–åŸºæœ¬ç±»å‹ï¼Œæ­é… *DataOutputStream* ä½¿ç”¨   |         *InputStream*          |          åŒ…å«ç”¨äºè¯»å–åŸºæœ¬ç±»å‹æ•°æ®çš„å…¨éƒ¨æ¥å£           |
    |  *BufferedInputStream*  |                       ç¼“å†²åŒºè¯»                       | *InputStream* æˆ–å¯é€‰ç¼“å†²åŒºå¤§å° |          å‘è¿›ç¨‹ä¸­æ·»åŠ ç¼“å†²åŒºï¼Œä¸æ¥å£å¯¹è±¡æ­é…           |
    | *LineNumberInputStream* |                    è·Ÿè¸ªè¾“å…¥æµè¡Œå·                    |         *InputStream*          |              ä»…å¢åŠ è¡Œå·ï¼Œä¸æ¥å£å¯¹è±¡æ­é…               |
    |  *PushbackInputStream*  | èƒ½å¼¹å‡ºä¸€ä¸ªå­—èŠ‚çš„ç¼“å†²åŒºï¼Œå¯ä»¥å°†è¯»åˆ°çš„æœ€åä¸€ä¸ªå­—ç¬¦å›é€€ |         *InputStream*          | ä½œä¸ºç¼–è¯‘å™¨çš„æ‰«æå™¨ï¼ŒJava ç¼–è¯‘å™¨ä½¿ç”¨ï¼Œå…¶ä»–åœºæ™¯ä¸ä¼šä½¿ç”¨ |

*   *FilterOutputStream* å­ç±»åŠåŠŸèƒ½

    |          å­ç±»          |                             åŠŸèƒ½                             |             æ„é€ å‚æ•°              |      ä½¿ç”¨      |
    | :--------------------: | :----------------------------------------------------------: | :-------------------------------: | :------------: |
    |   *DataInputStream*    | æ­é… *DataInputStream* ä½¿ç”¨ï¼Œå°†åŸºæœ¬ç±»å‹åŠ String æ ¼å¼åŒ–è¾“å‡ºåˆ°æµä¸­ |          *OutputStream*           | wirte å¼€å¤´æ–¹æ³• |
    |     *PrintStream*      | æ ¼å¼åŒ–è¾“å‡ºåŸºæœ¬æ•°æ®ç±»å‹åŠ String å¯¹è±¡ï¼Œå¯èƒ½ä¼šæœ‰é—®é¢˜ï¼ˆæ•æ‰äº†æ‰€æœ‰ IOExceptionï¼Œå¿…é¡»ä½¿ç”¨ checkErrorï¼Œä¸”æœªå®Œå…¨å›½é™…åŒ–ï¼‰ |          *OutputStream*           | print/println  |
    | *BufferedOutputStream* |        ä¿®æ”¹è¿‡çš„ *OutputStream*ï¼Œå¯¹æ•°æ®æµä½¿ç”¨ç¼“å†²æŠ€æœ¯         | *OuputStream*ï¼Œå¯é€‰æŒ‡å®šç¼“å†²åŒºå¤§å° |                |

##### å­—ç¬¦çš„è¾“å…¥è¾“å‡º

*Reader*//*Writer* æä¾›å…¼å®¹ Unicode ä¸é¢å‘å­—ç¬¦çš„ I/O  åŠŸèƒ½ã€‚*Reader* å’Œ *Writer* çš„ç»§æ‰¿å±‚æ¬¡ç»“æ„ä¸»è¦æ˜¯ä¸ºäº†å›½é™…åŒ–ï¼Œåœ¨ I/O æ“ä½œä¸­æ”¯æŒ Unicodeï¼ˆJava ä¸­ char ä¹Ÿæ˜¯ 16 ä½ Unicodeï¼‰ï¼Œ*Stream* çš„ I/O æµä»…æ”¯æŒ 8 ä½çš„å­—èŠ‚æµã€‚ä¸èƒ½å¾ˆå¥½å¤„ç† 16 ä½çš„ Unicode å­—ç¬¦ã€‚

ä¸è¾“å…¥/å‡ºæµç±»ä¼¼ï¼Œ*Reader*/*Writer* å­ç±»åŠé€‚é…å™¨æŒ‡å®šäº†å¦‚ä½•å°†å­—èŠ‚æµè½¬æ¢å­—ç¬¦æµï¼Œ*FilterReader*/*FilterWriter* åŠå­ç±»åˆ™è£…é¥°æµçš„å¦‚ä½•æ“ä½œæµçš„è¡Œä¸º

*å­—ç¬¦ä¸å­—èŠ‚å¯¹åº”è£…é¥°å™¨åŠè¿‡æ»¤å™¨ç±»*

|                å­—èŠ‚è£…é¥°                 |       å­—ç¬¦è£…é¥°       |               å­—èŠ‚è¿‡æ»¤                |             å­—ç¬¦è¿‡æ»¤             |
| :-------------------------------------: | :------------------: | :-----------------------------------: | :------------------------------: |
|              *InputStream*              | *InputStreamReader*  |          *FilterInputStream*          |          *FilterReader*          |
|             *OutputStream*              | *OutputStreamWriter* |         *FilterOutputStream*          | *FilterWriter*ï¼ˆæŠ½è±¡ç±»æ²¡æœ‰å­ç±»ï¼‰ |
|            *FileInputStream*            |     *FileReader*     |         *BufferedInputStream*         |         *BufferedReader*         |
|           *FileOutputStream*            |     *FileWriter*     |        *BufferedOutputStream*         |         *BufferedWriter*         |
| *StringBufferInputStream*ï¼ˆDeprecatedï¼‰ |    *StringReader*    |           *DataInputStream*           |         *BufferedReader*         |
|                                         |    *StringWriter*    |             *PrintStream*             |          *PrintWriter*           |
|         *ByteArrayInputStream*          |  *CharArrayReader*   | *LineNumberInputStream*ï¼ˆDeprecatedï¼‰ |        *LineNumberReader*        |
|         *ByteArrayOutputStream*         |  *CharArrayWriter*   |           *StreamTokenizer*           |        *StreamTokenizer*         |
|            *PipeInputStream*            |     *PipeReader*     |         *PushbackInputStream*         |         *PushbackReader*         |
|           *PipedOutputStream*           |    *PipedWriter*     |                                       |                                  |

###### è£…é¥°å™¨

*Reader/Writer* åŠå…¶å­ç±»æœ‰ç€ä¸ *InputStream*/*OutputStream* å¯¹åº”çš„ç±»ï¼Œ*FilterReader*/*FilterWriter* æœ‰ç€ä¸ *FilterInputStream*/*FilterOutputStream* å¯¹åº”çš„å­ç±»

###### é€‚é…å™¨

å½“éœ€è¦æŠŠå­—èŠ‚æµå’Œå­—ç¬¦æµç»“åˆä½¿ç”¨æ—¶ï¼Œéœ€è¦ç”¨åˆ°é€‚é…å™¨

*   *InputStreamReader* å¯ä»¥æŠŠ *InputStream* è½¬æ¢ä¸º *Reader*
*   *OutputStreamWriter* å¯ä»¥æŠŠ *OutputStream* è½¬æ¢ä¸º *Writer*

##### æ ‡å‡†I/O

Java æä¾›äº† *System.in*ã€*System.out*ã€*System.err* æ¥å®šä½æ ‡å‡† I/Oï¼Œå¹¶æä¾›äº†é‡å®šå‘çš„æ–¹æ³•ï¼ŒI/O  é‡å®šå‘æ“ä½œçš„æ˜¯å­—èŠ‚æµï¼Œå› æ­¤åªèƒ½ä½¿ç”¨å­—èŠ‚æµè£…é¥°å™¨è£…é¥°å­—ç¬¦æµ

##### NIO

jdk 1.4 å¼•å…¥çš„ `java.nio.*` åŒ…ä¸­å¼•å…¥æ–°çš„ I/O ç±»åº“ï¼Œæ—§çš„ I/O åŒ…å·²ç»ä½¿ç”¨ nio é‡æ–°å®ç°è¿‡ã€‚ä½¿ç”¨æ›´åŠ æ¥è¿‘äºæ“ä½œç³»ç»Ÿ I/O çš„æ–¹å¼ï¼šé€šé“å’Œç¼“å†²å™¨ã€‚ä¸ç›´æ¥å’Œé€šé“äº¤äº’åªæ˜¯å’Œç¼“å†²å™¨äº¤äº’ï¼Œé€šé“è¦ä¹ˆä»ç¼“å†²å™¨è·å–æ•°æ®ï¼Œè¦ä¹ˆå‘ç¼“å†²å™¨å‘é€æ•°æ®ï¼Œå¯ä»¥å‘é€šé“ä¼ é€ç”¨äºè¯»å†™çš„ *ByteBuffer*

æ—§ I/O åº“ä¸­ *FileInputStream*ã€*FileOutputStream*ã€*RandomAccessFile* å¯ä»¥äº§ç”Ÿ *FileChannel*ï¼Œ*Reader* å’Œ *Writer* å­—ç¬¦æ¨¡å¼ç±»ä¸èƒ½äº§ç”Ÿé€šé“ï¼Œ*java.nio.channels.Channels* æä¾›åœ¨é€šé“ä¸­äº§ç”Ÿ *Reader* å’Œ *Writer*

###### *ByteBuffer*

ä¸é€šé“ç›´æ¥äº¤äº’çš„ç¼“å†²å™¨ï¼Œå¯ä»¥å­˜å‚¨æœªåŠ å·¥å­—èŠ‚çš„ç¼“å†²å™¨ã€‚å¯ä»¥ä½¿ç”¨ put æ–¹æ³•ç›´æ¥è¿›è¡Œå¡«å……ï¼ˆå¡«å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå­—èŠ‚ï¼Œæˆ–åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼ï¼‰æˆ– warp æ–¹æ³•å°†å·²å­˜åœ¨çš„å­—èŠ‚æ•°ç»„åŒ…è£…åˆ° *ByteBuffer* ä¸­ã€‚ç¼“å†²å™¨ç”±å®¹é‡ï¼ˆä¸å˜ï¼‰ã€è¯»å†™ä½ç½®ï¼ˆä¸‹ä¸€ä¸ªå€¼å°†åœ¨æ­¤å¤„è¯»å†™ï¼‰ã€ç•Œé™ï¼ˆè¶…è¿‡å®ƒè¿›è¡Œè¯»å†™æ—¶æ²¡æœ‰æ„ä¹‰ï¼‰ã€æ ‡è®°ï¼ˆå¯é€‰çš„ç¼–è¾‘ï¼Œé‡å¤ä¸€ä¸ªè¯»å…¥æˆ–å†™å‡ºæ“ä½œï¼‰

å¯¹äºåªè¯»è®¿é—®ï¼Œå¿…é¡»æ˜¾å¼åœ°ä½¿ç”¨é™æ€çš„ allocate æ–¹æ³•æ¥åˆ†é… *Bytebuffer*ï¼Œå¯ä»¥ä½¿ç”¨ allocatedDirect  è€Œä¸æŒ‡å®šç¼“å†²å¤§å°æ¥äº§ç”Ÿä¸€ä¸ªä¸æ“ä½œç³»ç»Ÿæœ‰æ›´é«˜è€¦åˆæ€§çš„ç›´æ¥ç¼“å†²å™¨ã€‚

*ByteBuffer*  ç”± read æ¨¡å¼åˆ‡æ¢åˆ° wirte æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ flip è½¬æ¢åæ‰èƒ½å†™å…¥ï¼Œç”± write æ¨¡å¼åˆ‡æ¢åˆ° read æ¨¡å¼æ—¶ï¼Œå¿…é¡» clear åæ‰èƒ½ç»§ç»­è¯»å…¥

```java
while (in.read(byteBuffer) != -1) {
	byteBuffer.flip();
	out.write(byteBuffer);
	byteBuffer.clear();
}
```

ç¼“å†²å™¨å®¹çº³çš„æ˜¯æ™®é€šçš„å­—èŠ‚ï¼Œå°†å…¶è½¬æ¢æˆå­—ç¬¦ï¼šåœ¨è¾“å…¥æ—¶å¯¹å…¶è¿›è¡Œç¼–ç ï¼Œè¯»å–æ—¶å°† *ByteBuffer* è½¬æ¢æˆ *CharBuffer*ï¼›åœ¨è¾“å‡ºæ—¶å¯¹å…¶è¿›è¡Œè§£ç ï¼›é€šè¿‡ *CharBuffer*.put() æ–¹æ³•å‘ *ByteBuffer* å†™å…¥

```java
// è¾“å‡ºåŸå§‹å­—ç¬¦
byteBuffer.asCharBuffer().toString()
// è¾“å‡ºæ—¶è§£ç 
String encoding = System.getProperty("file.encoding");
Charset.forName(encoding).decode(byteBuffer));
// å†™å…¥æ—¶ç¼–ç ï¼Œè¯»å–æ—¶å°† ByteBuffer è½¬æ¢æˆ CharBuffer byteBuffer.asCharBuffer()
ByteBuffer.wrap("Some text ğŸ¦‹ s".getBytes(StandardCharsets.UTF_16));
byteBuffer.asCharBuffer();
// ä½¿ç”¨ CharBuffer put
ByteBuffer.allocate(1024).asChrBuffer.put("Some text ğŸ˜€");
```

è§†å›¾ç¼“å†²å™¨å¯ä»¥é€šè¿‡æŸä¸ªç‰¹å®šçš„åŸºæœ¬æ•°æ®ç±»å‹çš„è§†çª—æŸ¥çœ‹å™¨åº•å±‚çš„ *ByteBuffer*ã€‚å¯¹è§†å›¾çš„ä»»ä½•ä¿®æ”¹éƒ½ä¼šæ˜ å°„æˆä¸ºå¯¹ *ByteBuffer* ä¸­æ•°æ®çš„ä¿®æ”¹ã€‚è§†å›¾å…è®¸å•ä¸ªæˆ–æ‰¹é‡çš„è¯»å–åŸºæœ¬æ•°æ®ç±»å‹ã€‚

*ByteBuffer* ä»¥é«˜ä½ä¼˜å…ˆï¼ˆbig endian å°†æœ€é‡è¦çš„å­—èŠ‚å­˜æ”¾åœ¨åœ°å€æœ€ä½çš„å­˜å‚¨å™¨å•å…ƒï¼Œlittle endian å°†æœ€é‡è¦çš„å­—èŠ‚æ”¾åœ¨åœ°å€æœ€é«˜çš„å­˜å‚¨å™¨å•å…ƒï¼‰çš„å½¢å¼å­˜å‚¨æ•°æ®

###### *MappedByteBuffer*

ç‰¹æ®Šçš„ç›´æ¥ç¼“å†²å™¨ï¼Œå¯ä»¥æ˜ å°„æŸä¸ªå¤§æ–‡ä»¶çš„è¾ƒå°çš„éƒ¨åˆ†ï¼Œç”± *RandomAccessFile* é€šé“ map äº§ç”Ÿï¼Œç»§æ‰¿è‡ª *ByteBuffer*

##### å‹ç¼©

I/O ç±»åº“æ”¯æŒè¯»å†™å‹ç¼©æ ¼å¼çš„æ•°æ®æµã€‚å±äºå­—èŠ‚æµç»§æ‰¿ç»“æ„ä¸­ä¸€éƒ¨åˆ†ã€‚

*å‹ç¼©ç±»ç»“æ„*

|           ç±»           |                           åŠŸèƒ½                           |
| :--------------------: | :------------------------------------------------------: |
|  *CheckedInputStream*  | GetCheckSum ä¸ºä»»ä½• InputStream äº§ç”Ÿæ ¡éªŒå’Œï¼ˆä¸ä»…è§£å‹ç¼©ï¼‰  |
| *CheckedOutputStream*  | GetCheckSum ä¸ºä»»ä½• OutputStream äº§ç”Ÿæ ¡éªŒå’Œï¼ˆä¸ä»…æ˜¯å‹ç¼©ï¼‰ |
| *DeflaterOutputStream* |                        å‹ç¼©ç±»åŸºç±»                        |
|   *ZipOutputStream*    |                å°†æ•°æ®å‹ç¼©æˆ Zip æ–‡ä»¶æ ¼å¼                 |
|   *GZIPOutputStream*   |                å°†æ•°æ®å‹ç¼©æˆ GZIP æ–‡ä»¶æ ¼å¼                |
| *InflaterInputStream*  |                      è§£å‹ç¼©ç±»çš„åŸºç±»                      |
|    *ZipInputStream*    |                è§£å‹ç¼© Zip æ–‡ä»¶æ ¼å¼çš„æ•°æ®                 |
|   *GZIPInputStream*    |                è§£å‹ç¼© GZIP æ–‡ä»¶æ ¼å¼çš„æ•°æ®                |

###### GZIP å‹ç¼©

å‹ç¼©ç±»ä½¿ç”¨æ—¶ï¼Œå°†è¾“å‡ºæµè£…é¥°æˆ *GZIPOutputStream* æˆ– *ZipOutputStream*ï¼Œå°†è¾“å…¥æµè£…é¥°åŸ *GZIPInputStream* æˆ– *ZipInputStream*ï¼Œå…¶ä»–æ“ä½œä¸ IO è¯»å†™ä¸€è‡´ã€‚

```java
void gzipCompress() throws IOException {
    BufferedReader in = new BufferedReader(new FileReader(new File("prlog.http")));
    BufferedOutputStream out = new BufferedOutputStream(
        new GZIPOutputStream(new FileOutputStream("test.gz")));
    System.out.println("Writing file");
    int c;
    while ((c = in.read()) != -1) {
        out.write(c);
    }
    in.close();
    out.close();
    System.out.println("Reading file");
    BufferedReader in2 = new BufferedReader(
        new InputStreamReader(new GZIPInputStream(new FileInputStream("test.gz"))));
    String s;
    while ((s = in2.readLine()) != null) {
        System.out.println(s);
    }
}
```

##### å¯¹è±¡ I/O 

###### å¯¹è±¡åºåˆ—åŒ–

Java å¯¹è±¡åºåˆ—åŒ–å°†å®ç°äº† *Serializable* æ¥å£çš„å¯¹è±¡è½¬æ¢æˆä¸€ä¸ªå­—èŠ‚åºåˆ—ï¼Œå¹¶èƒ½å¤Ÿåœ¨ä»¥åå°†è¿™ä¸ªå­—èŠ‚åºåˆ—å®Œæˆæ¢å¤ä¸ºåŸæ¥çš„å¯¹è±¡ï¼Œæ”¯æŒè·¨ç½‘ç»œï¼Œè·¨ç³»ç»Ÿä¼ è¾“ã€‚å¹¶ä¸”èƒ½é€’å½’è¿½è¸ªå¯¹è±¡å†…æ‰€åŒ…å«çš„æ‰€æœ‰å¼•ç”¨ï¼Œå¹¶ä¿å­˜é‚£äº›å¯¹è±¡ã€‚

###### *ObjectOutputStream*

åºåˆ—åŒ–å¯¹è±¡æ—¶ï¼Œåˆ›å»ºè¾“å‡ºç›®çš„åœ°çš„ *OutputStream* å¹¶ä½¿ç”¨ *ObjectOutputStream* è£…é¥°ï¼Œè°ƒç”¨ writeObjectã€‚å¯¹è±¡åºåˆ—åŒ–æ˜¯åŸºäºå­—èŠ‚çš„ã€‚è¿˜åŸä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œåˆ›å»ºæº *InputStream* å¹¶ä½¿ç”¨ *ObjectInputStream* è£…é¥°ï¼Œè°ƒç”¨ readObjectï¼Œè¿”å›ä¸€ä¸ªå‘ä¸Šè½¬å‹çš„ Objectï¼Œå¯¹ä¸€ä¸ª *Serializable* å¯¹è±¡è¿›è¡Œè¿˜åŸçš„è¿‡ç¨‹ä¸­ï¼Œæ²¡æœ‰è°ƒç”¨ä»»ä½•æ„é€ å™¨ï¼ŒåŒ…æ‹¬é»˜è®¤çš„æ„é€ å™¨ï¼Œæ•´ä¸ªå¯¹è±¡éƒ½æ˜¯é€šè¿‡ *InputStream* ä¸­å–å¾—æ•°æ®æ¢å¤è€Œæ¥çš„

