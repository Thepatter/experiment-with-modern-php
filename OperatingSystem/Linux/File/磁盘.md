### 磁盘

#### 磁盘分区

一块磁盘是可以被分区成多个分区槽（partition）。Linux 的装置都是以文件的形态存在

##### 磁盘结构

磁盘主要由：磁盘盘、机械手臂、磁头、主轴马达组成。数据的写入是在磁盘盘面。磁盘盘面可以分为扇区（Sector）与磁道（Track）两种单位，扇区区的物理大小一般为 512bytes 或 4kbytes。所有磁盘盘的同一个磁道为磁柱，通常为文件系统的最小单位，即分区槽的最小单位。

GPT 可达到 64 bit 记录功能的分区表，可以使用扇区来作为分区单位

磁盘的第一个扇区特别重要，记录了磁盘分区表信息和开机管理程序记录区，早期磁盘第一个扇区记录格式为 MBR（master boot record）。现在又支持记录 GPT（GUID partition table）。分区表记录分区槽的区段信息。

##### 磁盘连接方式与装置文件名

大部分 Linux 发行版已经将 IDE 界面的磁盘文件名仿真成根 SATA 一样。正常的机器大概使用 /dev/sd[a-] 的磁盘文件名，虚拟机环境下，可能会使用 /dev/vd[a-p] 文件名。

SATA/USB/SAS 等磁盘接口都是使用 SCSI 模块来驱动的，这些接口的磁盘装置文件名都是 /dev/sd[a-p] 的格式。SATA/USB 接口的磁盘没有一定的顺序，装置的文件名为 Linux 核心侦测到磁盘的顺序，USB 磁盘在开机完成后才被系统捕捉，USB 装置名会在 SATA 插槽接口名之后。

##### MBR 分区表

早期的 Linux 系统为了兼容 Windows 磁盘，使用的是支持 Windows 的 MBR 来处理开机管理程序和分区表。开机管理程序记录区与分区表都放在第一个扇区，这个扇区通常是 512 bytes 大小，会记录：

* 主要启动记录区：可以安装开机管理程序的地方，有 446 bytes
* 分区表：记录整个磁盘的分区状态，有 64 bytes

由于分区表所在区块有 64 bytes 容量，因此最多仅能有 4 组记录区，每组记录区记录了该区段的启始与结束的磁柱号码，这四个分区记录被称为主要或延伸分区槽。

每个分区槽的数据是分开的，对一个分区槽内的数据进行操作，不会影响其他分区槽数据。

延伸分区可以使用额外的扇区来记录分区信息，本身不能被拿来格式化，可以通过延伸分区所指向的那个区块继续作分区的记录，由延伸分区继续切出来非分区槽为逻辑分区槽，逻辑分区可以使用的磁柱范围就是延伸分区所设定的范围。逻辑分区从 /dev/sda5 开始