### Linux目录配置

### Linux目录配置依据-FHS

`Filesystem Hierarchy Standard` 标准的主要目的是希望让用户了解到已安装软件通常放置于那个目录下。FHS 根据过去的经验一直在改变，FHS 依据文件系统使用的频繁与否与是否允许用户随意修改，而将目录定义成为四种交互作用的形态

* **可分享：**可分享给其他系统挂载使用的目录，所以包括执行文件与用户的邮件数据，是能够分享给网络上其他主机挂载用的目录
* **不可分享：** 自己机器上面运行的设备文件或是与程序有关的 `socket` 文件等，由于仅与自身机器有关，不能分享给其他主机
* **不变：**有些数据是不会经常变动的，跟随着发行版本而不变动。如函数库，文件说明，系统管理员所管理的主机服务配置文件等
* **可变动：**经常修改的数据，如日志文件，一般用户可自行接收的新闻组

事实上 FHS 针对目录树架构仅仅定义出三层目录下面应该放置什么数据，分别是

* `/`：根目录，与启动系统有关
* `/usr`：`unix software resource` 与软件安装/执行有关
* `/var` ：`variable`：与系统运行过程有关

### FHS 定义的必须存在的目录

根目录是整个系统最重要的一个目录，因为不但所有的目录都是由根目录衍生出来的，同时根目录也与启动、还原、系统修复等操作有关。由于系统启动时需要特定的启动软件、内核文件、启动所需程序、函数库等文件数据，若系统出现错误时，根目录也必须要包含能够修复文件系统的程序才行。因为根目录这么重要，在 `FHS` 的要求中，希望根目录不要放在非常大分区中。FHS 标准建议是：**根目录应该越小越好，且应用程序所安装的软件最好不要与根目录放在同一个分区内，保持根目录越小越好。如此不但性能较佳，根目录所在文件系统也较不容易发生问题**

FHS　定义出根目录下面应该有这些子目录的存在，即使没有物理目录，也希望至少有链接目录存在

#### 根目录下必须要存在的目录

* `/bin`

  系统很多执行文件的存放目录。但 `/bin` 比较特殊，因为 `/bin` 放置的是在单人维护模式下还能够被使用的命令。在 `/bin` 下的命令可以被 `root` 和一般账号所使用，主要有：`cat,cp,bash` 等常用命令。较新的发行版中已链接到 `/usr/bin`

* `/boot`

  放置启动会使用到的文件，包括 Linux 内核文件以及启动选项与启动所需配置文件等。Linux 内核常用的文件名为：`vmlinuz`，如果使用的是 `grub2` 这个启动引导程序，则还会存在 `/boot/grub2/` 这个目录

* `/dev`

  任何设备与接口设备都是以文件的形式存在于这个目录当中。读写这个目录下的某个文件，就等于读写某个设备，比较重要的文件有 `/dev/null`/，`/dev/zero`，`/dev/tty`，`/dev/loop`，`dev/sd`

* `/etc`

  系统主要配置文件目录。一般来说这个目录下文件可以让一般用户查看，但只有 root 用户能修改。FHS 建议不要放置可执行（binary）文件在这个目录中。比较重要的有：`/etc/modprobe.d`，`/etc/passwd` ，`/etc/fstab`，`/etc/issue`。

  FHS 还规范了几个重要的目录最好存在 `/etc/` 目录下：

  `/etc/opt` ：必要，这个目录放置第三方辅助软件 `/opt` 的相关配置文件

  `/etc/x11`：建议，与 `X Window` 有关的各种配置文件都在这里，尤其是 `xorg.conf` ，这个 X Server 的配置文件

  `/etc/sgml/`：建议，与 `SGML` 格式有关的各项配置文件

  `/etc/xml`：建议，与 `XML` 格式有关的各项配置文件

* `/lib`

  系统的函数库非常多，而 `/lib` 放置的则是在启动时会用到的函数库，以及在 `/bin` 或 `/sbin` 下面的命令会调用的函数库。较新的发行版已链接至 `/usr/lib/`

  `/lib/modules/`：这个目录主要放置可抽换式的内核相关模块（驱动程序）

* `/media`

  可删除的设备，包括：软盘，光盘，DVD 等设备都暂时挂载于此。常见的文件名有 `/media/floppy`，`/media/cdrom`

* `/mnt`

  暂时挂载某些额外的设备，一般建议放置这个目录中。

* `/opt`

  给第三方辅助软件放置的目录。如果自行安装额外的软件（非原发行版提供），那么也能够将软件安装到这里来，不过，以前的 Linux 中，还是习惯放置在 `/usr/local` 目录下

* `/proc/`

 虚拟文件系统，将内核与进程状态归档为文本文件。如：uptime，network。在 Linux 中，对应 `Procfs` 格式挂载

* `/run`

  早期 FHS 规定系统启动所产生的各项信息应该要放置在 `/var/run` 目录下，新版的 FHS 则规范到 `/run` 下面，由于 `/run` 可以使用内存来模拟，性能会好很多

* `/sbin`

  为启动过程中所需要的，里面包括了启动，修复，还原系统所需要的命令。某些服务器软件程序，一般则放置到 `/usr/sbin` 当中。至于本机自行安装的软件所产生的系统执行文件（system binary），则放置到 `/usr/local/sbin` 当中。常见的命令包括 `fdisk`，`fsck`，`ifconfig`，`mkfs` 等。较新的发行版已链接到 `/usr/sbin/` 文件夹下

* `/srv`

  `srv` 可视为 `service` 的缩写，是一些网络服务启动之后，这些服务所需要使用的数据目录，常见的服务包括 `www`，`FTP`。不过系统的服务数据如果尚未要提供给因特网任何人浏览的话，默认建议放置 `/var/lib` 

* `/tmp`

  让一般用户或正在运行的程序暂时放置文件的地方。这个目录是任何人都能存器的，所以要定期清理。当然，重要数据不可放置在此目录。FHS 建议在启动时，应该要将 `/tmp` 下数据都删除

#### `/usr/` 目录

依据 FHS 的基本定义，`/usr` 里面放置的数据可分享与不可变动的。`/usr` 是 UNIX 操作系统资源所放置的目录，而不是用户的数据。FHS 建议所有软件开发者，应该将他们的数据合理地分别放置到这个目录下的子目录，而不要自行建立该软件自己独立的目录；因为所有系统默认的软件（发行版提供的软件）都会放置到 `/usr` 下面。`/usr` 的子目录建议有以下目录：

* `/usr/bin/` 

  所有一般用户能够使用的命令都放置于此。FHS 要求此目录下不应该有子目录

* `/usr/include/`

  标准包含文件

* `/usr/lib/`

  与 `/lib` 功能相同

* `/usr/local`

  系统管理员在本机安装自己下载的软件（非发行版默认提供），建议安装到此目录，这样会比较便于管理。

* `/usr/sbin`

  非系统正常运行所需要的系统命令，最常见的就是某些网络服务器软件的命令，不过基本功能与 `/sbin` 差不多

* `/usr/share`

  主要放置只读的数据文件，包括共享文件，这个目录下放置的数据几乎是不分硬件架构均可读取的数据，因为几乎都是文本文件。常见目录有：

  `/usr/share/man`：在线帮助文件

  `/usr/share/doc`：软件的说明文档

  `/usr/share/zoneinfo`：与时区有关的时区文件

#### `/var` 目录

`/var` 目录主要针对经常性变动的文件，包括缓存（cache）、日志文件（log file）以及某些软件运行所产生的文件，包括程序文件（lock file，run file）。如 MySQL 数据的文件等

* `/var/cache/`

  应用程序本身运行过程中会产生的一些缓存

* `/var/lib/`

  程序本身执行的过程中，需要使用到的数据文件放置的目录。在此目录下各自的软件应该要有各自的目录。如 `/var/lib/mysql`

* `/var/lock`

  某些设备或文件资源一次只能被一个应用程序所使用，如果同时有两个程序使用该设备时，就可能错误，锁文件目录，一般链接至 `/run/lock/` 文件夹

* `/var/log/`

  日志文件目录。如：登录日志 `/var/log/wtmp`

* `/var/mail`

  放置个人邮箱的目录。不过这个目录也被放置到 `/var/spool/mail` 目录中，通常这两个目录是互为链接文件

* `/var/run/`

  某些程序或服务启动后，会将它们的 PID 放置在此目录。一般链接至 `/run/` 目录。

* `/var/spool`

  通常放置一些队列数据。这些数据被使用后通常会被删除

* `/var/tmp/`

  在系统重启过程中可以保留的临时文件


### FHS 建议存在的目录

* `/home/`

  默认的用户 `home directory`。

* `/lib<qual>`

  用来存放与  `/lib` 不同格式的二进制函数库，如支持 64 位的函数库等

* `/root`

  root 用户的 `home directory`。如果进入单人维护模式而仅挂载根目录时，该目录就能够拥有 `root` 的家目录，一般将 `/root` 与 `/` 放置在同一个分区

### Linux 常见目录

* `/lost+found/` 

  使用 `ext2`，`ext3`，`ext4` 文件系统格式才会产生的一个目录，目的在于当文件系统发生错误时，将一些遗失的片段放置在该目录下。如果使用的是  `xfs` 文件系统，则不会存在该目录

* `/proc`

  虚拟文件系统，放置的数据都在内存中，是内核运行时状态抽象

* `sys`

  虚拟文件系统，主要记录内核和硬件信息相关的内容。包括当前已加载的内核模块与内核检测到的硬件设备信息
