### 基本设计模式概念

**MVC 展示了松耦合而不是直接调用功能，通过分离不同的元素或参与者来完成一个任务，MVC 可以提供大型程序所需的灵活性，程序越庞大，就越需要 MVC 提供的模块灵活性**

#### 设计模式基本原则

MVC 的特点：**通过在视图和模型之间建立一个订购／通知协议，实现视图和模型的解耦合。**

##### 设计模式原则

**按接口而不是按实现来编程**，要将一个变量设置为一个抽象类或接口数据类型的实例，而不是一个具体实现的实例。在 PHP 中，不能声明一个变量的数据类型为抽象父类（抽象类或接口），因为如果不实例化一个类实例，就不能声明数据类型。**一个对象实例的数据类型不仅是它实例化的对象类型，该对象的父类也将作为它的数据类型**

**代码提示中使用接口数据类型**

##### 抽象类及接口

**接口是指方法及其签名**，而不是关键字interface。每个类都有一个接口，由其方法签名构成。扩展一个抽象类类似于实现一个接口。

**应当优先选择对象组合而不是类继承**开发程序时，如果有机会使用组合，就应当优先使用组合而不是继承。这样以来子类就不会因为几次到大量不用的属性和方法而变的过度膨胀。设计模式中的组合通常是指模式中一个参与者内部的组合。组合可以避免维护多个继承层次上的各个子类。而且还可以避免可能导致的错误。

##### 委托：IS-A和HAS-A的差别

在设计模式领域，有些类的构造中使用了其他类。一个类将一个任务传递给另一个类时，这就是委托。使用继承时，每一个子类时另一个类或多个类的一部分（IS-A关系）；而采用组合，对象可以使用一个不同的类或一组类完成一系列任务（USE-A）。大多数设计模式同时包含有继承和组合。要避免使用继承形成一长串子类，孙子类，曾孙类。设计模式方法建议使用浅继承，另外尽量使用多个类的功能。

#### 设计模式的组织

设计模式是按作用和范围来组织的，设计模式的作用可以分为**创建型**，**结构型**，**行为型**。反映了一般所认为模式所要完成的目标。按范围划分可以分为**类**，**对象**

##### 创建型模式就是用来创建对象的模式。这些模式是对实例化过程的抽象。如果程序越来越依赖组合，就会减少对硬编码实例化的依赖，而更多地依赖于一组灵活的行为，这些行为可以组织到一个更为复杂的集合中。创建型模式提供了一些方法来封装系统使用的具体类的有关知识，还可以隐藏实例创建和组合的相关信息。

**结构型模式关心的是组合结构应当保证结构化。结构型类模式（structural class patterns）采用继承来组合接口或实现。结构型对象模式（structural object patterns）则描述了组合对象来建立新功能的方法。**

**行为型模式，绝大多数模式都是行为型对象。这些模式的核心是算法和对象之间职责的分配。这些设计模式描述的不只是对象或类的模式，它们还描述了类和对象之间的通信模式。**

**类模式的重点在于类及其子类之间的关系。类模式的关系是通过继承建立的，类模式是静态的，在编译时已经固定。**

**对象模式强调的是可以在运行时改变的对象，因此这些模式更具动态性**

不要建立硬编码的操作来满足请求，职责链（Chain of Responsibility）设计模式提供一种更好的方法，允许沿着一个链传递请求，这样就可以有多个对象都有机会处理这个请求。

**设计模式作用，范围和变化**

|  作用  |  范围  |   模式名   |         可能变化的方面          |
| :--: | :--: | :-----: | :----------------------: |
| 创建型  |  类   |  工厂方法   |         实例化对象的子类         |
|      |  对象  |   原型    |         实例化对象的类          |
| 结构型  |  类   |   适配器   |          对象的接口           |
|      |  对象  | 适配器／装饰器 |       对象的职责而不派生子类        |
| 行为型  |  类   |  模版方法   |          算法中的步骤          |
|      |  对象  |   状态    |           对象状态           |
|      |  对象  |   策略    |            算法            |
|      |  对象  |   职责链   |        可以满足请求的对象         |
|      |  对象  |   观察者   | 依赖于其他对象的对象数；当前可以有多少个依赖对象 |

适配器有两种配置，一个类适配器模式和一个对象适配器模式