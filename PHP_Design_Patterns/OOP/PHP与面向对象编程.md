### PHP与面向对象编程

#### 类与对象

类由两部分组成，属性和方法。属性是不同类型的数据对象，数字，字符串，null和布尔类型，通常数据作为抽象数据类型存储。存储为变量、常量和数组；方法是处理这些数据的函数

##### 单一职责原则

**一个类应当只有一个职责**

##### 客户类作为请求者

**包含类的 PHP 文件应当由其他类使用，而不是自启动**

#### 抽象

__抽象 (abstraction)指示一个对象的基本特征，使它与所有其他对象区分开，从而从查看者的角度提供了清晰定义的概念边界__

**一定程度上所有类都是对数据的一组操作的抽象：抽象是用来处理复杂性的主要工具，一个问题越复杂，就越需要抽象来解决,抽象是处理复杂性的具体方法，我们对现实中的相似性分组（对具体的相似性抽象），从而用更方管理的方式加以处理**：eg,我们不会说“我的忠实的，毛茸茸的、摇着尾巴的、爱舔来舔去的、名叫SyntaxError的湿鼻子朋友，而会说”我的狗“

#### 抽象类（abstract classes)。抽象类可以为项目提供一种组织机制。抽象类不能实例化，只能由具体类（也就是可以实例化的类）继承抽象类的接口以及它的所有具体属性

接口的核心部分是否类中操作（函数）定义的所有签名组成。签名（signature)包括一个操作的操作名和参数。实际上签名还包括返回数据类型。

```
public function trick($whatever){} 操作名trick参数$whatever
```

得到一个对象的所有签名后，这就是它的**接口**

一个类至少有一个抽象方法，它必然是一个抽象类。

```
abstract class OneTrickAbstract
{
  	public $storeHere;
  	abstract public function trick($whatever);
}
```

只要包含方法的签名，而且保证提供正确的可见性，就可以采用任何方式来实现抽象方法。

#### interface 接口

接口可以包含具体常量，这个 PHP 接口的独有特性。不能包含具体方法或变量,只要保证实现了接口中的所有方法，就可以根据需要增加更多其他的方法和属性。接口包含常量，使用作用域解析符号(::)，在类中及接口实现中存取常量。

```
$someVariable = InterfaceName::SOME_CONDTANT
```

#### 类型提示

指定数据类型为接口而不是一个具体实现，对数据的引用要通过父类完成，这通常是一个接口或者抽象类

```
function doWork(TypeHint $someVar)
```

在设计模式中，更倾向于使用抽象类或接口，因为它不会绑定一个具体实现的类型，而只是限制了结构。

从实际的开发来讲，强制数据类型可以确保倘若给定方法中使用了代码提示，那么其中使用的对象（类）必然有给定的接口。另外如果把一个接口（可以是抽象类或接口）作为代码提示，绑定会更宽松；它会绑定接口而不是绑定到一个特定的实现。随着程序变得越来越大，只要遵循接口，就可以做任何改变而不会对程序造成破坏，所做的修改也不会与具体实现纠缠不清。

#### 封装

**封装就是划分一个抽象的诸多元素的过程，这些元素构成该抽象的结构和行为；封装的作用就是将抽象的契约接口与其实现分离**，类通过限制访问其方法和属性来实现封装。

##### 通过可见性保护封装

可见性是指对类属性的存取（或访问）private 这个属性只能在同一类中访问，它只对同一个类中元素可见。

protected 则允许类及子类都可以访问该属性。子类扩展一个包含保护方法的抽象类时，对于抽象方法，在使用之前必须先实现这个抽象方法，对象有保护可见性的具体方法，子类可以直接使用。

public 所有构造函数都是公共的。包含公共方法或属性是为了提供一个途径，从而可以与一个没有构造函数自启动的对象保持交流。

##### 获取方法和设置方法

为了保持封装，同时提供可访问性，OOP 设计建议使用获取方法和设置方法。不建议直接访问一个类，通过直接赋值来得到或修改属性值，这些工作完全可以由获取方法，设置方法来完成。使用获取方法和设置方法必须适度，滥用获取方法和设置方法会破坏封装。获取方法，设置方法是私有的，所以这个访问是封装的，另外，这个实现中，设置方法值放在类中，所以它相当于一个大的数据容器。

**对于面向对象系统中的数据处理，不要直接请求完成一个工作所需的信息，而应当请求拥有这个信息的对象为你完成工作。**

某种程度上，设计模式的目的是建立对象之间的通信链路，很多所谓的 OOP 并没有正确使用获取方法和设置方法，允许公开访问获取方法和设置方法只会破坏封装。**在过程式编程中，过程（process）完全写在一处，即按顺序编写一系列指令，而在面向对象（OOP）编程中，过程表示为对象之间的一系列消息。一个对象向另一个对象发送一个消息，就会完成过程的一部分，然后再向另一个对象发送一个新的消息，这又会完成过程的另一部分，如此继续，要修改一个过程，只需要重新组织消息序列，而不是改变一个过程（process）**,保持封装同时保持对象（类）之间通信的过程正是设计模式的一个工作。

#### 继承

一个类如果扩展了另一个类，就会拥有这个类的所有属性和方法。继承有助于为程序中包含不同类建议一种结构。为了保持类之间的松绑定，通常会继承抽象类，而且是欠继承，只有一层子类。如果程序通过深层继承绑定到具体类，即使对基类做简单的修改，也会对子类带来严重的破坏。

#### 多态

调用有相同接口的对象来完成不同的工作，一个名字，多个实现，接口的不同实现，在PHP中，方法签名中不包括任何返回信息，如果实现的很混乱，可能返回不同的数据类型，而且其中一些有返回值而另外一些没有返回值。多态的价值在于，即使形态可能不同，但是总能依靠接口指导你的实现。PHP7.0接口已增加返回类型提示