## MySQL 语句执行性能相关

### 条件字段函数操作

* 对索引字段做函数操作，可能会破坏索引值的有序性，因此优化器就决定放弃走树搜索功能（优化器并不是要放弃使用这个索引，是放弃走索引树搜索，转而使用全索引扫描）

* 隐式类型转换

  ```mysql
  select * from tradelog where tradeid=110717;
  ```

  交易编号 `tradeid` 这个上，本来就有索引，但是 `explain` 结果却显示，这条语句需要走全表扫描。`tradeid` 的字段类型 `varchar(32)`，而输入的参数却是整型，所以需要做类型转换

  可以使用 `select "10" > 9` 的结果来判断：

  1.如果规则是“将字符串转成数字“，那么就是做数字比较，结果应该是 1；

  2.如果规则是“将数字转字符串“，那么就是做字符串比较，结果应该是 0；

在 `MySQL` 中，字符串和数字做比较的话，是将字符串转换成数字。所以对于优化器来说，这个语句相当于

```mysql
select * from tradelog where CAST(tradid as signed int) = 110717;
```

* 如果做表连接插叙的时候，两个表的字符集不同，连接过程中要求在被驱动表的索引字段加上函数操作，是直接导致对被驱动表做全表扫描的原因

