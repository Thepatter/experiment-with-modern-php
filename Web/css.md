### CSS

#### 层叠

##### 层叠选择

当声明冲突时，层叠会依据三种条件解决冲突：

1.  样式表的来源：包含自定义样式（优先，使用 `!important` 标记的样式优先级最高）和浏览器默认样式（默认会：为标题和段落添加上下外边距，为列表添加左侧内边距，为链接添加颜色，为元素设置各种默认字号）
2.  选择器优先级：那些选择器比另一些选择器更重要
3.  源码顺序：样式在样式表里的声明顺序（优先级相同时，较晚加载或引入的声明优先）

元素的每个属性最多只有一个层叠值（作为层叠结果，应用到一个元素上的特定属性的值），处理层叠时：

*   在选择器中不要使用 ID
*   不要使用 `!important`

###### 层叠优先级

如果无法用来源来解决冲突声明，浏览器会尝试检查它们的优先级。浏览器将优先级分为：

*   HTML 行内样式

    即使用 HTML 元素的 style 属性写样式，这个声明只会作用于当前元素。会覆盖任何来自样式表或 style 标签的样式（除非样式表使用 `!important` 强调，但如果行内元素也使用 `!important` 强调则样式表无法覆盖），行内样式没有选择器，直接作用于所在的元素

*   选择器优先级

    ID 选择器优先级最高，其次是累，最后是标签。伪类选择器和属性选择器与一个类选择器的优先级相同。通用选择器和组合器对优先级没有影响

###### 继承

继承属性从 DOM 树的父节点传递到后代节点直到被层叠值覆盖。默认情况下，只有特定的一些属性能被继承（大多数与文本相关）：`color`、`font`、`font-family`、`font-size`、`font-weight`、`font-variant`、`font-style`、`line-height`、`letter-spacing`、`text-align`、`text-indent`、`text-transform`、`white-space`、`word-spacing`、列表属性（`list-style`、`list-style-type`、`list-style-position`、`list-style-image`）、表格的边框属性（`border-collapse`、`border-spacing`）

*   inherit

    使用该关键字来覆盖另一个值，该元素会继承其父元素的值

*   initial

    每个 CSS 属性都有初始值，如果将 initial 值赋给某个属性，则将其值重置为默认值（auto 不是所有元素的默认值，对 `border-with` 和 `padding`  来讲，auto 值非法）

当一个元素的值定义为长度（px、em、rem等）时，子元素会继承它的计算值。当使用 em 等单位定义行高时，它们的值是计算值。当使用 em 等单位定义行高时，它们的值是计算值，传递到子元素上，如果子元素有不同的字号，且继承了 line-height 属性，会造成意外结果（文字重叠）

###### 简写属性

简写属性省略值时会将省略的值隐式设置为初始值。

*    `margin`、`padding` 或为元素的四条边分别指定值的边框属性时，这些属性的值按顺时针方向：上、右、下、左，指定两个值时，上、下使用第一个值，左、右使用第二个值，指定一个值，则四个方向都使用该值
*   `background-position`、`box-shadow`、`text-shadow` 属性或指定从一个点出发的两个方向的值会先指定水平方向的右/左属性值，然后才是垂直方向的上/下属性值

##### 层叠计算单位


###### 绝对长度单位

px：像素，不严格等于显示器的像素。96px 通常等于一个物理英寸的大小、mm：毫米、cm、in：英寸、pt：点，1/72 英寸、pc：派卡 12 点。换算公式：1in = 25.4mm = 2.54cm = 6pc = 72pt = 96px

###### 相对单位

相对单位的值会根据外部因素发送变化。在 Web 环境下，用户可以设置浏览器窗口的大小，而 CSS 必须适应这种窗口大小。当网页打开后，用户还可以缩放网页，CSS 还需要适应线的限制。即，不能在创建网页时就应用样式，而是要等到要将网页渲染到屏幕上时，才去计算样式。CSS 为网页提供了后期绑定，直到内容和样式都完成了，二者才会结合起来

font-size 相对单位

 * em 
   
   适合基于特定的字号进行排版，在 CSS 中，1 em 等于当前元素的字号，其准确值取决于作用的元素，浏览器会根据相对单位的值计算出绝对值。当设置 padding、height、width、border-radius 等属性时，使用 em 会使属性跟着元素均匀的缩放

   如果设置 font-size 值为 em 会根据继承的属性来设置，如果同时用 em 设置字号和其他属性，会先计算字号在根据字号计算其他属性
   
   当列表多级嵌套并且给每一级使用 em 定义字号时，就会发生文字缩小现象。此时需要使用其他规则覆盖或使用 rem

* rem
   
   是 root em 缩写，是相对于根元素的字号单位。根元素的字号为浏览器默认的字号 16px，根元素上的 em 是相对于浏览器的默认值

一般建议 rem 设置字号，用 px 设置边框，用 em 设置其他大部分属性，尤其是内边距、外边距和圆角（不过我有时用百分比设置容器宽度）。

视口（浏览器窗口里网页可见部分的边框区域，不包括浏览器的地址栏、工具栏、状态栏）

 * vh

   视口高度的 1/100

 * vm

   视口宽度的 1/100

 * vmin

    视口宽、高中较小的一方的 1/100

 * vmax

    视口宽、高中较大的一方的 1/100

`calc()` 函数可以对两个及以上的值进行基本运算。当要结合不同的单位的值时使用该函数很方便

###### 无单位数值行高

line-height、z-index、font-weight 允许无单位的值（不指定单位的数）。无单位的值 0（只能用于长度、百分比，不能用于角度值、时间值）。使用无单位的数值，继承的是声明值，在每个继承子元素上会重新计算值。

* line-height

  值既可以有单位也可以无单位，通常使用无单位值

###### CSS 变量

层叠变量的自定义属性，可以声明一个变量（以 `--` 开始，声明在块内），以 `var()` 函数引用，参数为变量名，可选第二个参数为默认值

```css
:root {
    --main-font: Helvetica, Arial, sans-setf;
}
p {
    font-family: var(--main-font);
}
```
自定义属性得声明能够层叠和继承，可以在多个选择器中定义相同得变量，这个变量在网页不同地方有不同得值，如定义一个变量为黑色，在某个容器中重新定义为白色。基于该变量得样式在容器外部动态解析为黑色，在容器内部动态解析为白色



#### 盒子模型

CSS 布局主要就是基于盒子模型，盒子属性

*   padding

    内边距，围绕这内容的空间

*   border

    边框，紧接着内边距的线，分隔内边距和外边距

*   margin

    外边距，围绕元素外部的空间

#### 组件

##### 选择器

使用选择器列表时，如果任何一个选择器无效 (存在语法错误)，那么整条规则都会被忽略。

*选择器*

|     选择器     |                    选择的内容                     |                      示例                      |
| :------------: | :-----------------------------------------------: | :--------------------------------------------: |
| 元素/标签/类型 |            所有指定该类型的 HTML 元素             |                `p ` 选择 `<p>`                 |
|       ID       | 特定 ID 元素，单 HTML 页面中，一个元素只有一个 ID |                    `#my-id`                    |
|       类       | 具有特定类元素（单页面中，一个类可以有多个实例）  |                  `.my-class`                   |
|    标签属性    |                 拥有特定属性元素                  |                   `img[src]`                   |
|      伪类      |         特定状态下的特定元素（鼠标悬停）          |                   `a:hover`                    |
|     伪元素     |           选择元素某个部分而非元素自己            |          `p::first-lin` (p 中第一行)           |
|      子代      |                    组合选择器                     | `article > p`（选择 artical 元素的初代子元素） |
|      后代      |                                                   |                  `article p`                   |
|    相邻兄弟    |                                                   |                    `h1 + P`                    |
|    通用兄弟    |                                                   |                    `h1 ~ p`                    |
|      通配      |                                                   |                     `* {}`                     |

